@{
    ViewData["Title"] = "Welcome to eMovietickets";
}

<style>

	.back {
		display: none;
	}

	button {
		border: 1px dotted black;
		margin-left: 1vh;
		border-radius: 1vh;
		cursor: pointer;
	}

	.header {
		text-align: center;
		background-color: lightyellow;
		border-radius: 2vh;
		box-shadow: 0 0 20px black;
        padding-top:2px;
        padding-bottom:2px;
	}

	.hoverButton {
		box-shadow: 5px 4px 12px 0px black;
	}

	.back {
		padding-top: 6vh;
	}

	.row {
		padding: 1vh 1vh;
	}

	#title, #result {
		text-align: center;
		font-size: 5vh;
	}

	#poster {
		text-align: center;
	}

	#result, #title, .combine, #year, #rated, #released, #runtime, #genre, #director, #writer, #actors, #plot, #language, #country, #awards, #metascore, #imdbRating, #imdbVotes, #imdbID, #Type, #DVD, #BoxOffice, #Production, #website, #response {
		background: white;
		padding: 8px;
		border: 5px solid burlywood;
		box-shadow: 2px 4px #888888;
		border-radius: 14px;
		margin-top: 12px;
	}

	.posteri {
		background: #9ADFDD;
		border: 5px solid burlywood;
		border-radius: 14px;
		box-shadow: 2px 4px #888888;
		margin-bottom: 12px;
	}
</style>
<div class="container" style="text-align:center;">
    <h1 style="color: darkgoldenrod; font-family:Great Vibes, cursive; font-size: 60px; line-height: 80px; font-weight: bold; margin-bottom: 0px; margin-top: 10px; text-align: center; text-shadow: 0 1px 1px black;" class="display-4">
        <i class="  bi bi-film  "> </i>Welcome To eMovietickets
    </h1>
    <br />
    <button type="submit" style="background-color:darksalmon; height: 40px; width: 520px;" class="border border-dark 10px">
        <a asp-controller="Movies" asp-action="Index" style="color:black;font-weight:bold;font-family:Georgia, 'Times New Roman', Times, serif">
            <i class=" fa fa-sign-in "></i>
            Book Your Favourite Movie Tickets Now
        </a>
    </button>
</div>
<br />
<div id="carousel" class="carousel slide carousel-fade" data-ride="carousel" data-interval="4000">
    <ol class="carousel-indicators">
        <li data-target="#carousel" data-slide-to="0" class="active"></li>
        <li data-target="#carousel" data-slide-to="1"></li>
        <li data-target="#carousel" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner" role="listbox">
        <div class="carousel-item active">
            <a asp-controller="Home" asp-action="More">
                <picture>
                    @*<source srcset="https://dummyimage.com/2000x500/007aeb/4196e5" media="(min-width: 1400px)">
                    <source srcset="https://dummyimage.com/1400x500/#007aeb/4196e5" media="(min-width: 769px)">
                    <source srcset="https://dummyimage.com/800x500/007aeb/4196e5" media="(min-width: 577px)">*@
                    <img src="~/lib/Movies.jpg" style="height:510px" class="d-block w-100" alt="">
                </picture>

                <div class="carousel-caption">
                    <div>
                        @*<h2>Digital Craftsmanship</h2>
                        <p>We meticously build each site to get results</p>*@
                        <span class="btn btn-sm btn-outline-success">Explore More</span>
                    </div>
                </div>
            </a>
        </div>

        <div class="carousel-item">
            <a asp-controller="Home" asp-action="More">
                <picture>
                    <img src="~/lib/M1.jpeg" style="height:510px" class="d-block w-100" alt="">
                </picture>

                <div class="carousel-caption justify-content-center align-items-center">
                    <div>
                        <span class="btn btn-sm btn-outline-success">Explore More</span>
                    </div>
                </div>
            </a>
        </div>

        <div class="carousel-item">
            <a asp-controller="Home" asp-action="More">
                <picture>
                    <img src="~/lib/M2.jpg" style="height:510px" class="d-block w-100" alt="">
                </picture>

                <div class="carousel-caption justify-content-center align-items-center">
                    <div>
                        <span class="btn btn-sm btn-outline-success">Explore More</span>
                    </div>
                </div>
            </a>
        </div>
        <!-- /.carousel-item -->
    </div>
    <!-- /.carousel-inner -->
    <a class="carousel-control-prev" href="#carousel" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carousel" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>
<div class="new_footer_area bg_color">
    <div class="new_footer_top">

        <div class="footer_bg">
            <div class="footer_bg_one"></div>
            <div class="footer_bg_two"></div>
        </div>
    </div>
</div>
<hr style="color:black;" />

<h1 style="text-align:center;color:darkgreen;font-weight:bold;font-family:'Times New Roman'"> Connect with best cinema hall in INDIA </h1>
<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d117711.92803916913!2d86.10573032961219!3d22.784013115055473!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x39f5e31989f0e2b5%3A0xeeec8e81ce9b344!2sJamshedpur%2C%20Jharkhand!5e0!3m2!1sen!2sin!4v1680952115936!5m2!1sen!2sin" style="height:330px; border:10px;" class="d-block w-100" alt="" allowfullscreen="" loading="lazy"></iframe>
@*<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3152.4498542826755!2d-122.45061178468158!3d37.80293077975432!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x808586d510144681%3A0xe960db8a581aacf5!2sThe%20Palace%20Of%20Fine%20Arts!5e0!3m2!1sen!2sus!4v1638508534791!5m2!1sen!2sus" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>*@
<hr style="color:black;" />

<div class="container-fluid">
    <img src="~/lib/Imdb-1-930x527.jpg" style="height:310px" class="d-block w-100" alt="">
    <h1 style="text-align:center;color:darkcyan;font-weight:bold;font-family:'Times New Roman', Times, serif"> Find Any Movie From IMDb Database </h1>
    <div class="container header">
        <div class="row">
            <div class="col-12 col-md-5" style="padding-bottom: 2px; padding-top:2px;">
                <h4 style="color:black"><i>Search via IMDB ID</i></h4>
                <input id="inputId" type="text" onfocus="this.value=''" placeholder=" IMDB Id..." size="15" style="border:solid" />
                <button id="btnId" class="btn btn-success">Search</button>
            </div>
            <div class="col-12 col-md-2"><h3 style="color:black;padding-bottom: 2px; padding-top:2px;">OR</h3></div>
            <div class="col-12 col-md-5" style="padding-bottom: 2px; padding-top:2px;">
                <h4 style="color:black"><i>Search via Movie Name</i></h4>
                <input id="inputName" type="text" onfocus="this.value=''" placeholder=" Movie Name" size="20" style="border:solid" />
                <button id="btnName" class="btn btn-success">Search</button>
            </div>
        </div>
    </div>
    <br />
    <div class="container back" style="color:black">

        <div class="row">
            <div class="col-12" id="result"><h3>Searched Movie:</h3></div>
        </div>

        <div class="row">
            <div class="col-12" id="title"><b>Title:</b></div>
        </div>

        <br>
        <div id="poster"></div>

        <div class="row">
            <div class="col-12 col-sm-6" id="runtime"><b>Runtime:</b></div>
            <div class="col-12 col-sm-6" id="director"><b>Director:</b></div>
        </div>

        <div class="row">
            <div class="col-6 col-sm-4" id="year"><b>Year:</b></div>
            <div class="col-6 col-sm-4" id="rated"><b>Rated:</b></div>
            <div class="col-12 col-sm-4" id="genre"><b>Genre:</b></div>
        </div>

        <div class="row">
            <div class="col-12" id="writer"><b>Writer:</b></div>
        </div>

        <div class="row">
            <div class="col-12" id="actors"><b>Actors:</b></div>
        </div>

        <div class="row">
            <div class="col-12" id="plot"><b>Plot:</b></div>
        </div>


        <div class="row">
            <div class="col-12 col-sm-6" id="language"><b>Language:</b></div>
            <div class="col-12 col-sm-6" id="country"><b>Country:</b></div>
        </div>

        <div class="row">
            <div class="col-12" id="awards"><b>Awards:</b></div>
        </div>

        <div class="combine">
            <div class="row" id="rating">
                <div class="col-7 col-sm-6 col-xl-4"><b>Source:</b></div>
                <div class="col-5 col-sm-6 col-xl-8"><b>Value:</b></div>
            </div>
            <div class="row" id="ratings"></div>
        </div>

        <div class="row">
            <div class="col-12 col-sm-4 col-xl-2" id="metascore"><b>Metascore:</b></div>
            <div class="col-12 col-sm-4 col-xl-2" id="imdbRating"><b>ImdbRating:</b></div>
            <div class="col-12 col-sm-4 col-xl-3" id="imdbVotes"><b>ImdbVotes:</b></div>
            <br>
            <div class="col-12 col-sm-6 col-xl-3" id="imdbID"><b>ImdbID:</b></div>
            <div class="col-12 col-sm-6 col-xl-2" id="Type"><b>Type:</b></div>
        </div>
        <div class="row">
            <div class="col-12 col-sm-3" id="DVD"><b>DVD:</b></div>
            <div class="col-12 col-sm-5" id="BoxOffice"><b>BoxOffice:</b></div>
            <div class="col-12 col-sm-4" id="Production"><b>Production:</b></div>
        </div>
        <div class="row">
            <div class="col-12 col-sm-9 col-xl-6" id="website"><b>Website:</b></div>
            <div class="col-12 col-sm-3 col-xl-6" id="response"><b>Response:</b></div>
        </div>
        <br>

    </div>
</div>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="imdb.js"></script>
<br />
 <script>
    $(document).ready(() => {

        $("#btnId").hover(function () {
            $(this).toggleClass("hoverButton");
        })

        $("#btnName").hover(function () {
            $(this).toggleClass("hoverButton");
        })

        $("#btnId").click(function () {

            $Mid = $("#inputId").val();
            console.log($Mid);
            if ($Mid != "") {
                $(".back").css("display", "block");
            }
            else { alert("Enter IMDB ID") }
            $url = 'https://www.omdbapi.com/?i=' + $Mid + '&apikey=499e294';
            getAllData($url);

        });

        $("#btnName").click(function () {

            $Name = $("#inputName").val();
            if ($Name != "") {
                $(".back").css("display", "block");
            }
            else { alert("Enter Movie Name") }
            $Year = $("#inputYear").val();
            console.log($Name);
            console.log($Year);
            $url = 'https://www.omdbapi.com/?t=' + $Name + '&y=' + $Year + '&apikey=99fd5e8e';
            getAllData($url);
        })


    });

    let getAllData = ($url) => {

        console.log("making request")

        $.ajax({
            type: 'GET',
            dataType: 'json',
            async: true,
            url: $url,
            success: (data) => {
                console.log(data);
                if (data.Title != undefined) {
                    $("#title").empty().append("<b>Title:</b> " + data.Title);
                }
                else {
                    alert("Movie is not available");
                    $(".back").css("display", "none");
                }
                $("#runtime").empty().append("<b>Runtime:</b> " + data.Runtime);
                $("#director").empty().append("<b>Director:</b> " + data.Director);
                $("#rated").empty().append("<b>Rated:</b> " + data.Rated);
                $("#year").empty().append("<b>Year:</b> " + data.Year);
                $("#genre").empty().append("<b>Genre:</b> " + data.Genre);
                $("#writer").empty().append("<b>Writer:</b> " + data.Writer);
                $("#actors").empty().append("<b>Actors:</b> " + data.Actors);
                $("#plot").empty().append("<b>Plot:</b> " + data.Plot);
                $("#language").empty().append("<b>Language:</b> " + data.Language);
                $("#country").empty().append("<b>Country:</b> " + data.Country);
                $("#awards").empty().append("<b>Awards:</b> " + data.Awards);

                $("#ratings").empty();
                for (response of data.Ratings) {
                    let temp = `<div class="col-7 col-sm-6 col-xl-4"><i>${response.Source}</i></div>
                               <div class="col-5 col-sm-6 col-xl-8">${response.Value}</div>`;
                    $("#ratings").append(temp);
                }

                if (data.Poster != 'N/A') {
                    $("#poster").empty().html('<img class="center posteri"  src="' + data.Poster + `"/>`);
                }
                else {
                    $("#poster").empty().html(`<img src="No-image-available.jpg" class="center posteri"/>`);
                }
                $("#metascore").empty().append("<b>Metascore:</b> " + data.Metascore);
                $("#imdbRating").empty().append("<b>ImdbRating:</b> " + data.imdbRating);
                $("#imdbVotes").empty().append("<b>ImdbVotes:</b> " + data.imdbVotes);
                $("#imdbID").empty().append("<b>ImdbID:</b> " + data.imdbID);
                $("#Type").empty().append("<b>Type:</b> " + data.Type);
                $("#DVD").empty().append("<b>Dvd:</b> " + data.DVD);
                $("#BoxOffice").empty().append("<b>BoxOffice:</b> " + data.BoxOffice);
                $("#Production").empty().append("<b>Production:</b> " + data.Production);
                $("#website").empty().append("<b>Website:</b> " + data.Website);
                $("#response").empty().append("<b>Response:</b> " + data.Response);
            },

            error: (err) => {

                console.log(err.responseJSON.error.message);
                alert(err.responseJSON.error.message);

            },

            timeout: 3000

        })
    }
            </script>